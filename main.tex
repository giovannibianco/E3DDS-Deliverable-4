\documentclass[12pt,a4paper]{article}
\PassOptionsToPackage{table}{xcolor}
% \documentclass{report}
\usepackage[utf8]{inputenc}
\usepackage{xspace}
\usepackage{url}
\usepackage{hyperref}
\usepackage{fancyhdr}
\usepackage{cite}
\usepackage{pgfgantt}
\usepackage{todonotes}
\usepackage[icelandic,UKenglish]{babel}
\usepackage[UKenglish]{datetime}
\usepackage[T1]{fontenc}
\usepackage{graphicx}
\usepackage[table]{xcolor}
\usepackage{enumitem}% http://ctan.org/pkg/enumitem
\usepackage[gen]{eurosym}
\usepackage{multicol}
\graphicspath{ {./images/} }
\usepackage[titletoc,title]{appendix}
\usepackage{pdfpages}
% \usepackage{array}
% \usepackage{pbox}
% \usepackage{hanging}
\usepackage{fancyhdr}
% \usepackage{caption}
% \usepackage{enumitem}
\usepackage{fancyvrb}
\usepackage{color}
\usepackage[utf8]{inputenc}
\usepackage{graphicx}
\usepackage{listings}
\usepackage{url}
% comment
\usepackage{xspace}

\usepackage{rotating}
\usepackage{wrapfig}

\usepackage{cite}
\usepackage{textcomp}

\usepackage[gen]{eurosym}
\usepackage{hyperref}

\usepackage{todonotes}

\usepackage{gensymb}

% \usepackage{draftwatermark}
% \SetWatermarkText{draft v2}
% \SetWatermarkScale{6}

\fancypagestyle{plain}{ %
  \fancyhf{} % remove everything
  \renewcommand{\headrulewidth}{0pt} % remove lines as well
  \renewcommand{\footrulewidth}{0pt}
}

\hyphenation{EISCAT}

\input{abbrev}

\newcommand{\nnt}{NeIC NT1\xspace}

% \setlength{\topskip}{0mm}
\setlength{\headheight}{15pt}
% \setlength{\topmargin}{-5.4mm}
% \setlength{\textheight}{230mm}
\setlength{\textwidth}{180mm}
\setlength{\oddsidemargin}{-5.0mm}
% \setlength{\evensidemargin}{10.0mm}
% \setlength{\captionmargin}{7mm}

\title{
{\bf Deliverable Document 4} \\
The synergies with the \nnt operations}
\author{E3DDS Team~\footnote{
Anders Tjulin (EISCAT) {\tt anders.tjulin@eiscat.se};
Ari Lukkarinen (CSC) {\tt ari.lukkarinen@csc.fi};
Assar Westman (EISCAT) {\tt Assar.Westman@eiscat.se};
Carl-Fredrik Enell (EISCAT) {\tt carl-fredrik.enell@eiscat.se};
Dan Johan Jonsson (UiT) {\tt dan.jonsson@uit.no};
Janos Nagy (NSC) {\tt fconagy@nsc.liu.se};
Harri Hellgren (EISCAT) {\tt harri.hellgren@eiscat.se};
Ingemar H\"{a}ggstr\"{o}m (EISCAT) {\tt ingemar.haggstrom@eiscat.se};
Mattias Wadenstein (UmU) {\tt maswan@hpc2n.umu.se};
% Roy Dragseth (UiT) {\tt roy.dragseth@uit.no};
John White (NeIC) {\tt john.white@cern.ch}}}

\date{\today}

\begin{document}

\pagestyle{fancy}
\lhead{\bf E3DDS project}
\rhead{\bf 4: NT1 Synergies}

\maketitle
\par\noindent
\begin{minipage}{0.5\textwidth}
  \includegraphics[scale=0.18]{NEIC_logo_screen_black.pdf}
  %\vspace{-0.09in}
\end{minipage}
\begin{minipage}{0.5\textwidth}
  \hfill
  %\includegraphics[scale=0.25]{EISCAT3Dlogo1.pdf}
  % New official logo with green text
  \includegraphics[width=0.75\linewidth]{e3d-logo-green-500px}
\end{minipage}

\newpage
\tableofcontents
\newpage

\section{Executive Summary}
\label{exec-summ}

%\todo[inline]{Executive summary to be written at the end of the document writing process? Moved the current exec summary to introduction as that's what it was more like}

Deliverable 4: The synergies with the \nnt operations. Once decisions on the software to be deployed and run as a simulation of the \ED operations, the possibilities of inclusion to the NT1 operations are studied.The object to be delivered is a document that details the services for \ED operations and those that may or may not be managed by \nnt. This includes the services and service management (e.g. FitSM) required and the division of responsibilities.  Included are estimates of the staffing required to run these services and SLAs needed. 

The study of the synergies between \ED online and NT1 operations may start once the software decisions are made in Deliverable 1 in the sixth month of the project.

The process that follows is continuous and requires input from both \ED and NT1.

Document delivered. See section 3.2.

\section{Purpose}
\label{purpose}

\subsection{Intended Audience}

The intended audience of this document is primarily NeIC and the \ED project management and staff in order to understand 

\section{Introduction}
\label{intro}

\newlength{\mycolwidth}
\setlength{\mycolwidth}{3.0cm}

\input{site_services}
% \input{site_services_content}
% \end{tabular}
% \caption{The \einfra services required for \ED operations. % % \label{tab:services}}
% \end{table}
% \end{center}

\section{\ED Operations}

The services shown in Table~\ref{tab:services} are those estimated, at the time of writing, to be necessary for \ED to: acquire data; process online and offline; produce data products in order to steer the radar; serve data to users for analysis.

The radar data is used to control subsequent radar transmission and receiver look directions.
Therefore the online computing services must run in real-time while the radar is transmitting.

A service that is noted as ``run by" \EC is a service that required specialized in-house knowledge that is unlikely to be found elsewhere.
The ``owned by" designation for a service refers to the management and ownership of the data in the service.
For example, the ``Site data buffer" disk array could be operated by a non-\EC entity whereas the choices on the data to retain or remove from the disks are made by \EC.
Another example could be the ``User portal web GUI" where typically operating a complex web portal is better left to experienced experts and the \EC users would access as clients where data retention etc is handled by central portal policies.

The priority of a service is defined by: {\bf 1 High:} Without this service the radar system CANNOT be run; {\bf 2 Medium:} The radar can still run but data cannot be got out of the system; {\bf 3 Low:} Radar can run and data extracted but analysis and publishing not possible.

The following scenarios for running the \ED \einfra are considered.
In these scenarios, the standard assumptions are:
\bitm
\item That the \ED data is replicated to two redundant data archives.
\item The \ED radars are planned to run 24/7~\footnote{this is a big caveat...}
\eitm

In each scenario the following factors are considered.
The {\bf Risks} and {\bf Benefits} overall in having the various organizations running the services.
The {\bf Cost Efficiency} refers to how much effort an organization will have to expend to run a set of service(s).
{\bf Reliability} describes whether the service up-time can be maintained in order to process and serve the data from the expected duty cycle of the radar operations.
In these scenarios the ``users" are the consumers of the \ED data and the comments on {\bf User Satisfaction} evaluates how this would be affected by each scenario.

The \nnt is one of 14 regional computing centres of the Worldwide LHC Computing Grid:
the international e-infrastructure built to provide computing and storage for the Large Hadron Collider at CERN.
This Nordic solution is unique in being distributed across four countries: Denmark, Finland, Norway and Sweden.
\nnt is primarily an \einfra operational programme that receives data as part of the World-Wide LHC Computing Grid~\cite{wlcg} (WLCG).
This data is archived and also served to scientific users for analysis.
The data must be orchestrated over the many computing centres, disks and tapes all over Scandinavia.

\subsection{Scenario 1}

In this scenario \EC runs all the computing on-line and off-line services noted in Table~\ref{tab:services} except for the second redundant external data archive i.e. the copy of the \ED data.

\subsubsection*{Risks}
\bitm
\item Large amount of FTEs required to run all services.
\item Recruiting lots of skilled IT staff into \ESA might fail.
\item Under-estimate of effort. 
\item Running during vacation time. Full coverage during vacation. 24/7 on-call.
\item GDPR etc.
\item Incident impact higher if everything in one place.
\eitm

\subsubsection*{Benefits}
\bitm
\item Hardware and staff are controlled through one set of \EC processes.
\item No need to make special agreements with externals for data confidentiality.
\eitm

\subsubsection*{Cost Efficiency}
\bitm
\item It may not be cost efficient for one organization to run all the services. Finding people with enough skills to run and maintain a wide variety of services usually difficult.
\item Replication of already existing services run by other \einfra projects e.g. EGI Checkin~\cite{egi-checkin}.
\eitm

\subsubsection*{Reliability}
\bitm
\item Easier for operators to communicate... risks in distributed case.
\item Everything in the startup phase for first years.
\eitm

\subsubsection*{User Satisfaction}
\bitm
\item User satisfaction may be high as users are able to contact directly to \EC personnel for help with problems or questions.
\item User satisfaction might be negatively impacted by a learning period for how to run many new services.
\eitm

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Scenario 2}
\label{ssec:scen2}

The \nnt programme runs all computing services listed in Table~\ref{tab:services} except the \ED inventory system
and the First Stage Receive Units~\cite{fsru-tender} (FSRUs) under a service contract.
In this scenario, the services are still physically located at the central site (nominally Skibotn) and a
service contract is written with \nnt to run them.
This scenario could also apply to a commercial computing provider e.g. IBM Global services.

\subsubsection*{Risks}
\bitm
% \item REMOVE. Quantify. Large amount of FTEs required to run all services.
\item Recruiting lots of skilled IT staff into NT1 might fail.
\item Some \ED required services do not have synergies with current \nnt.
\item There would need to be complicated SLA negotiations to cover all services.
  Something essential might not covered by the agreement(s).
\eitm

\subsubsection*{Benefits}
\bitm
\item \EC would retain the control of the fundamental services most familiar for them i.e. operation of the FSRUs and the inventory databases.
\item Hardware and staff for running all other services are controlled through a single set of \nnt processes.
\item Recruiting into the \nnt will be easier as it is a distributed operation that can accesss a competence pool over the
  whole Nordic area. There are good synergies with home institutes of \nnt members.
\item There is prior experience in writing service contracts for similar operations.
\item \EC would be free to concentrate on running their critical services.
\eitm

\subsubsection*{Cost Efficiency}
\bitm
\item As with Scenario 1, it may not be cost efficient for one organization (\nnt) to run all the services.
  Finding enough people with the necessary skills to run and maintain a wide variety of services is usually difficult.
\item There is the risk of replication of already existing services run by other \einfra projects.
\item Some of the required \ED services does not have synergies with existing \nnt activities.
\eitm

\subsubsection*{Reliability}
\bitm
\item The reliability of some the services will be improved as the \ED addition would be an increment
  on already existing \nnt services in production.
\item Services that are not part of the \nnt core services would not necessarily be more reliable in this scenario.
\eitm

% Risks and benefits roughly the same.
% Recruiting easier.
% Cost benefits the same.
% Some services not suited to be run by NT1. Replicating services.
% Boundaries would have to be very tightly defined. SLAs.
% RBBF nodes... also tricky to run. Custom build of nodes. Tuning.
% Internal metadata catalogue?
% Experiment database... boundaries? Tricky boundary conditions... SLAs. Agents that program the FSRUs will pull data. 

\subsubsection*{User Satisfaction}
\bitm
\item \ED User satisfaction may be lowered as users will be required to more formally contact an external
  organization for help with problems or questions. Not contacting directly to other \EC colleagues.
\item User satisfaction might be negatively impacted by a learning period for how to run many new services.
  This is the same as in scenario 1. % \nnt is not expert in some services. Should be a smaller numbers.
\item As \nnt may have an easier time recruiting staff and using existing skills,
  being able to draw on wider range of experience in running services should improve the user satisfaction.
\eitm

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\subsection{Scenario 3}
\label{ssec:scen3}

In this scenario \EC runs the high-priority services and outsources medium/low to their partners.
Table~\ref{tab:services:s3} shows the services that \EC would run.
\input{site_services_s3}
The services listed in Table~\ref{tab:services:s3} can be seen to be more likely, and suitable, to be run at the
Skibotn site.
Table~\ref{tab:services:s3a} gives the low and medium priority services run by \EC partners.
It can be seen that these services are those that \EC is most likely to have expertise and interest to run at 
(Dirac at STFC, data staging and data archive at NT1, batch compute at HPC2N,
metadata catalog at CSC, software management at UiT, etc).
\input{site_services_s3_bar}
The services listed in Table~\ref{tab:services:s3a} do not necessarily need to be physically located at the \ED central site. 
\subsubsection*{Risks}
\bitm
  \item Hardware and staff for running all services will be operating in different administrative regimes.
   \item Some services maybe outsourced to unsuited partners.
   \item SLAs need to be defined between multiple entities.
\eitm

\subsubsection*{Benefits}
\bitm
  \item \EC would retain the control of the high-priority services.
  \item \EC would not need to run unfamiliar services.
  \item Services outsourced to suitable partners are run by organizations best suited and already operating such services.
\eitm

\subsubsection*{Cost Efficiency}
\bitm
  \item Cost efficiency improved if operators do not have to be re-trained if they are already familiar with the services.
  \item Cost efficiency improved if the partners can take in the \ED load as a fractional increase on their existing workload.
\eitm

\subsubsection*{Reliability}
\bitm
  \item Reliability improved if services are run by operators already familiar with the services.
  \item Organizations can improve the uptime by taking the the \ED load as a fractional increase on their existing workload.
\eitm

\subsubsection*{User Satisfaction}
\bitm
  \item May be impacted as users may have to formally contact service providers outside the \EC organization.
  \item Hopefully the service operators will be able to solve problems quickly due to experience.
\eitm

\subsection{Scenario 4}
\label{ssec:scen4}

In scenario 4, \EC runs most of the services but outsources services with ``obvious'' synergies to other organizations.
The criteria here is that an organization already runs the service required by \ED in their current normal operations.
For example, the following services run by other organizations can be considered:
\bitm
  \item DIRAC User Portal~\cite{dirac} is already operated for other communities at RAL;
  \item Identity management handled by EGI/INFN/etc for WLCG and others;
  \item User Compute at a centre that already operates large batch/cloud services;
  \item User software deployment (with someone that runs scientific computing)
  \item Data Archive, Data Staging, and Site Data Buffer could be synergistically run as one storage by NeIC NT1;
  \item Data product repository and publishing;
  \item File catalog operated by an institute that is already running Rucio~\cite{rucio}
\eitm
  
\subsubsection*{Risks}
\bitm
\item Services are running in different administrative regimes.
  \item SLAs that are not well-defined. 
\eitm

\subsubsection*{Benefits}
\bitm
  \item Services are run by organizations best suited and already operating such services.
  \item As organizations already operate the services in production mode, 24/7 coverage is more likely to be achieved.
\eitm

\subsubsection*{Cost Efficiency}
\bitm
\item Operators do not have to be re-trained as already familiar with the services.
\item The organizations can take in the \ED load as a fractional increase on their existing workload.
\eitm

\subsubsection*{Reliability}
\bitm
\item Reliability improved as the services are run by operators already familiar with the services.
\item Organizations can improve the uptime by taking the the \ED load as a fractional increase on their existing workload.
\eitm

\subsubsection*{User Satisfaction}
\bitm
\item User satisfaction may be impacted as \EC users will still have to formally contact external organizations for problems/requests.
\item The User Satisfaction should not be negatively impacted by service interruptions as the services are now
  run by organizations already suited to the task.
\eitm
  
\subsection{Scenario 5}
\label{ssec:scen5}

Scenario 5 is similar to (Section~\ref{ssec:scen3}) but in this case \nnt runs the high-priority services under a
service contract and \EC outsources the medium and low priority services to partners.
Therefore NeIC NT1 is running the online data production and the offline services are run by partners other than \EC.
The assumption that \EC will operate the FSRUs and inventory system still holds.

\subsubsection*{Risks}
\bitm
  \item The operations setup of NeIC NT1 is probably not suitable for running online data production.
  \item SLAs for online data production may be hard to achieve.
  \item Recruiting lots of skilled IT staff into \nnt for online operations might fail.
  \item Under-estimate by \nnt of amount of FTEs required to run online services.
  \item Other medium and low priority services may be outsourced to unsuitable partners.
\eitm

\subsubsection*{Benefits}
\bitm
\item \EC can concentrate on core scientific operations.
\eitm

\subsubsection*{Cost Efficiency}
\bitm
\item Cost efficiency for high priority services run by \nnt will probably not improve.
  These are not an incremental addition to an alrwady-existing operation.
  \item Cost efficiency for medium and low priority services may be improved if operators do not have to be re-trained if they are already familiar with the services.
  \item Cost efficiency for medium and low priority services may beimproved if the partners can take in the \ED load as a fractional increase on their existing workload.
\eitm

\subsubsection*{Reliability}
\bitm
  \item Reliability for medium and low priority services may be improved as the services are run by operators already familiar with the services.
  \item Reliability for high priority services run by \nnt as these services are not familiar.
\eitm

\subsubsection*{User Satisfaction}
\bitm
\item User satisfaction may suffer as \EC users will have to formally contact external organizations for problems/requests.
  \item Without a clear case for improved reliability user satisfaction will suffer.
\eitm

\subsection{Scenario 6}
\label{ssec:scen6}

In scenario 6 \nnt operates \EC{s} in-house services, that do not have obvious synergy with the \EC partners,
under a service contract.
This scenario has similarities to Section~\ref{ssec:scen2} and Section~\ref{ssec:scen4} but
in this case \nnt operates EISCAT's inhouse resources under a service contract.
Examples of the \ED service that have obvious synergies with partners are given in Section~\ref{ssec:scen4}.
The in-house \ED services that would be run by \nnt would be the high priority online data production.
The assumption that \EC will operate the FSRUs and inventory system still holds.

% Dedicated services run somewhere else.
% Run by a different team.
% Hired by EISCAT or service contract with NT1?
% Where you put the staff.
% Odd number options are for dedicated services
% Even number EISCAT writes service contract with SLA for outsourcing.
% NT1 would operate the services that do not have obvious synergy with the EISCAT ``partners".

\subsubsection*{Risks}
\bitm
  \item The operations setup of NeIC NT1 is probably not suitable for running online data production.
  \item SLAs for online data production may be hard to achieve.
  \item Recruiting lots of skilled IT staff into \nnt for online operations might fail.
  \item Under-estimate by \nnt of amount of FTEs required to run online services.
  \item Other medium and low priority services may be outsourced to unsuitable partners.
\eitm

\subsubsection*{Benefits}
\bitm
\item \EC can concentrate on core scientific operations.
\eitm

\subsubsection*{Cost Efficiency}
\bitm
\item Cost efficiency for high priority services run by \nnt will probably not improve.
  These are not an incremental addition to an alrwady-existing operation.
  \item Cost efficiency for medium and low priority services may be improved if operators do not have to be re-trained if they are already familiar with the services.
  \item Cost efficiency for medium and low priority services may beimproved if the partners can take in the \ED load as a fractional increase on their existing workload.
\eitm

\subsubsection*{Reliability}
\bitm
  \item Reliability for medium and low priority services may be improved as the services are run by operators already familiar with the services.
  \item Reliability for high priority services run by \nnt as these services are not familiar.
\eitm

\subsubsection*{User Satisfaction}
\bitm
\item User satisfaction may suffer as \EC users will have to formally contact external organizations for problems/requests.
  \item Without a clear case for improved reliability user satisfaction will suffer.
\eitm


% end of the document...
\newpage
\bibliography{main}{}
\bibliographystyle{unsrt}


\end{document}
